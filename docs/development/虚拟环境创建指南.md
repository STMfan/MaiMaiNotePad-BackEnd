# è™šæ‹Ÿç¯å¢ƒåˆ›å»ºæŒ‡å—

> ä½¿ç”¨ manage.sh å·¥å…·å¿«é€Ÿåˆ›å»ºå’Œé…ç½® Python è™šæ‹Ÿç¯å¢ƒ

## æ¦‚è¿°

MaiMaiNotePad é¡¹ç›®æä¾›äº†ä¾¿æ·çš„è™šæ‹Ÿç¯å¢ƒåˆ›å»ºå·¥å…·ï¼Œæ”¯æŒä¸‰ç§ä¸»æµçš„è™šæ‹Ÿç¯å¢ƒç®¡ç†æ–¹å¼ï¼š

- **Conda ç¯å¢ƒ**ï¼ˆæ¨èï¼‰ï¼šå¯æŒ‡å®š Python ç‰ˆæœ¬ï¼Œé€‚åˆéœ€è¦ç‰¹å®š Python ç‰ˆæœ¬çš„åœºæ™¯
- **venv ç¯å¢ƒ**ï¼šPython å†…ç½®ï¼Œä½¿ç”¨ç³»ç»Ÿ Python ç‰ˆæœ¬
- **uv ç¯å¢ƒ**ï¼šæå¿«çš„åŒ…ç®¡ç†å™¨ï¼Œæ”¯æŒæŒ‡å®š Python ç‰ˆæœ¬

## å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨ç®¡ç†å·¥å…·

```bash
# äº¤äº’å¼åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
./manage.sh create-env

# æˆ–ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°
./manage.sh create-env
```

å·¥å…·ä¼šå¼•å¯¼ä½ å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š
1. é€‰æ‹©è™šæ‹Ÿç¯å¢ƒç±»å‹
2. é…ç½®ç¯å¢ƒå‚æ•°ï¼ˆåç§°ã€Python ç‰ˆæœ¬ç­‰ï¼‰
3. å¯é€‰è‡ªåŠ¨å®‰è£…é¡¹ç›®ä¾èµ–

## ä¸‰ç§ç¯å¢ƒç±»å‹è¯¦è§£

### 1. Conda ç¯å¢ƒï¼ˆæ¨èï¼‰

**ä¼˜åŠ¿**ï¼š
- å¯ä»¥æŒ‡å®šä»»æ„ Python ç‰ˆæœ¬ï¼ˆ3.11ã€3.12ã€3.13ï¼‰
- å¼ºå¤§çš„åŒ…ç®¡ç†å’Œä¾èµ–è§£æ
- é€‚åˆç§‘å­¦è®¡ç®—å’Œæ•°æ®åˆ†æé¡¹ç›®
- ç¯å¢ƒéš”ç¦»æ€§å¥½

**ä½¿ç”¨æ­¥éª¤**ï¼š

```bash
./manage.sh create-env
# é€‰æ‹© 1. Conda ç¯å¢ƒ
```

å·¥å…·ä¼šï¼š
1. æ£€æŸ¥ conda æ˜¯å¦å®‰è£…
2. å¦‚æœæœªå®‰è£…ï¼Œæä¾›ä¸‹è½½é“¾æ¥å¹¶å»ºè®®å®‰è£…æ–¹å¼
3. è®©ä½ é€‰æ‹© Python ç‰ˆæœ¬ï¼ˆ3.11/3.12/3.13ï¼‰
4. åˆ›å»ºç¯å¢ƒï¼ˆé»˜è®¤åç§°ï¼šmai_notebookï¼‰
5. å¯é€‰è‡ªåŠ¨å®‰è£…ä¾èµ–

**æ¿€æ´»ç¯å¢ƒ**ï¼š

```bash
conda activate mai_notebook
```

**æ¨èåœºæ™¯**ï¼š
- éœ€è¦ç‰¹å®š Python ç‰ˆæœ¬
- å›¢é˜Ÿåä½œï¼Œç»Ÿä¸€å¼€å‘ç¯å¢ƒ
- éœ€è¦ç®¡ç†å¤šä¸ªé¡¹ç›®ç¯å¢ƒ

### 2. venv ç¯å¢ƒ

**ä¼˜åŠ¿**ï¼š
- Python å†…ç½®ï¼Œæ— éœ€é¢å¤–å®‰è£…
- è½»é‡çº§ï¼Œå¯åŠ¨å¿«
- é€‚åˆç®€å•é¡¹ç›®

**ä½¿ç”¨æ­¥éª¤**ï¼š

```bash
./manage.sh create-env
# é€‰æ‹© 2. venv ç¯å¢ƒ
```

å·¥å…·ä¼šï¼š
1. æ˜¾ç¤ºå½“å‰ Python ç‰ˆæœ¬
2. æ£€æŸ¥ç‰ˆæœ¬æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼ˆ3.11+ï¼‰
3. åˆ›å»ºç¯å¢ƒï¼ˆé»˜è®¤ç›®å½•ï¼š.venvï¼‰
4. å¯é€‰è‡ªåŠ¨å®‰è£…ä¾èµ–

**æ¿€æ´»ç¯å¢ƒ**ï¼š

```bash
# macOS/Linux
source .venv/bin/activate

# Windows
.venv\Scripts\activate
```

**æ¨èåœºæ™¯**ï¼š
- ç³»ç»Ÿ Python ç‰ˆæœ¬å·²æ»¡è¶³è¦æ±‚ï¼ˆ3.11+ï¼‰
- ä¸æƒ³å®‰è£…é¢å¤–çš„ç¯å¢ƒç®¡ç†å·¥å…·
- å¿«é€Ÿå¼€å‘å’Œæµ‹è¯•

### 3. uv ç¯å¢ƒ

**ä¼˜åŠ¿**ï¼š
- æå¿«çš„åŒ…å®‰è£…é€Ÿåº¦ï¼ˆæ¯” pip å¿« 10-100 å€ï¼‰
- å¯ä»¥æŒ‡å®š Python ç‰ˆæœ¬
- ç°ä»£åŒ–çš„åŒ…ç®¡ç†å·¥å…·

**ä½¿ç”¨æ­¥éª¤**ï¼š

```bash
./manage.sh create-env
# é€‰æ‹© 3. uv ç¯å¢ƒ
```

å·¥å…·ä¼šï¼š
1. æ£€æŸ¥ uv æ˜¯å¦å®‰è£…
2. å¦‚æœæœªå®‰è£…ï¼Œè¯¢é—®æ˜¯å¦å®‰è£…
3. æ˜¾ç¤ºå½“å‰ Python ç‰ˆæœ¬
4. è®©ä½ é€‰æ‹© Python ç‰ˆæœ¬æˆ–ä½¿ç”¨ç³»ç»Ÿ Python
5. åˆ›å»ºç¯å¢ƒï¼ˆé»˜è®¤ç›®å½•ï¼š.venvï¼‰
6. å¯é€‰ä½¿ç”¨ uv å¿«é€Ÿå®‰è£…ä¾èµ–

**æ¿€æ´»ç¯å¢ƒ**ï¼š

```bash
# macOS/Linux
source .venv/bin/activate

# Windows
.venv\Scripts\activate
```

**ä½¿ç”¨ uv å®‰è£…ä¾èµ–**ï¼ˆæ¨èï¼‰ï¼š

```bash
uv pip install -r requirements.txt
```

**æ¨èåœºæ™¯**ï¼š
- éœ€è¦é¢‘ç¹å®‰è£…å¤§é‡ä¾èµ–
- è¿½æ±‚æè‡´çš„å®‰è£…é€Ÿåº¦
- æ„¿æ„å°è¯•æ–°å·¥å…·

## ç¯å¢ƒé€‰æ‹©å»ºè®®

### å›¢é˜Ÿå¼€å‘ï¼ˆæ¨è Condaï¼‰

```bash
# 1. åˆ›å»ºç»Ÿä¸€çš„ Conda ç¯å¢ƒ
./manage.sh create-env
# é€‰æ‹© Condaï¼ŒPython 3.12ï¼Œç¯å¢ƒåï¼šmai_notebook

# 2. æ¿€æ´»ç¯å¢ƒ
conda activate mai_notebook

# 3. å®‰è£…ä¾èµ–
pip install -r requirements-dev.txt

# 4. éªŒè¯ç¯å¢ƒ
./manage.sh test-env
```

### ä¸ªäººå¼€å‘ï¼ˆæ¨è venv æˆ– uvï¼‰

```bash
# ä½¿ç”¨ venvï¼ˆç®€å•å¿«é€Ÿï¼‰
./manage.sh create-env
# é€‰æ‹© venv

# æˆ–ä½¿ç”¨ uvï¼ˆæé€Ÿå®‰è£…ï¼‰
./manage.sh create-env
# é€‰æ‹© uv
```

### CI/CD ç¯å¢ƒ

åœ¨ CI/CD ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ venv æˆ–ç›´æ¥å®‰è£…ï¼š

```bash
# GitHub Actions ç¤ºä¾‹
- name: Set up Python
  uses: actions/setup-python@v4
  with:
    python-version: '3.12'

- name: Install dependencies
  run: |
    python -m venv venv
    source venv/bin/activate
    pip install -r requirements-dev.txt
```

## å¸¸è§é—®é¢˜

### Q1: æ²¡æœ‰ condaï¼Œå¦‚ä½•å®‰è£…ï¼Ÿ

**æ¨èå®‰è£… Miniconda**ï¼ˆè½»é‡çº§ï¼‰ï¼š

```bash
# macOSï¼ˆä½¿ç”¨ Homebrewï¼‰
brew install miniconda

# æˆ–ä¸‹è½½å®‰è£…åŒ…
# https://docs.conda.io/en/latest/miniconda.html
```

**æˆ–å®‰è£… Anaconda**ï¼ˆå®Œæ•´ç‰ˆï¼‰ï¼š

```bash
# ä¸‹è½½å®‰è£…åŒ…
# https://www.anaconda.com/download
```

### Q2: æ²¡æœ‰ uvï¼Œå¦‚ä½•å®‰è£…ï¼Ÿ

**è‡ªåŠ¨å®‰è£…**ï¼ˆæ¨èï¼‰ï¼š

```bash
./manage.sh create-env
# é€‰æ‹© uvï¼Œå·¥å…·ä¼šè¯¢é—®æ˜¯å¦å®‰è£…
```

**æ‰‹åŠ¨å®‰è£…**ï¼š

```bash
# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# æˆ–ä½¿ç”¨ pip
pip install uv
```

### Q3: Python ç‰ˆæœ¬è¿‡ä½æ€ä¹ˆåŠï¼Ÿ

**æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ Conda åˆ›å»ºæŒ‡å®šç‰ˆæœ¬çš„ç¯å¢ƒ**

```bash
./manage.sh create-env
# é€‰æ‹© Condaï¼Œç„¶åé€‰æ‹© Python 3.12 æˆ– 3.13
```

**æ–¹æ¡ˆ 2ï¼šå‡çº§ç³»ç»Ÿ Python**

```bash
# macOSï¼ˆä½¿ç”¨ Homebrewï¼‰
brew install python@3.12

# Ubuntu/Debian
sudo apt update
sudo apt install python3.12
```

### Q4: å¦‚ä½•åˆ‡æ¢ç¯å¢ƒï¼Ÿ

**Conda ç¯å¢ƒ**ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒ
conda env list

# åˆ‡æ¢ç¯å¢ƒ
conda activate ç¯å¢ƒåç§°

# é€€å‡ºç¯å¢ƒ
conda deactivate
```

**venv/uv ç¯å¢ƒ**ï¼š

```bash
# æ¿€æ´»ç¯å¢ƒ
source .venv/bin/activate  # macOS/Linux
.venv\Scripts\activate     # Windows

# é€€å‡ºç¯å¢ƒ
deactivate
```

### Q5: å¦‚ä½•åˆ é™¤ç¯å¢ƒï¼Ÿ

**Conda ç¯å¢ƒ**ï¼š

```bash
# åˆ é™¤ç¯å¢ƒ
conda env remove -n ç¯å¢ƒåç§°
```

**venv/uv ç¯å¢ƒ**ï¼š

```bash
# ç›´æ¥åˆ é™¤ç›®å½•
rm -rf .venv
```

### Q6: ç¯å¢ƒåˆ›å»ºå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥æ­¥éª¤**ï¼š

1. ç¡®è®¤å·¥å…·å·²å®‰è£…ï¼ˆconda/uvï¼‰
2. æ£€æŸ¥ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³
3. æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼ˆå®‰è£…ä¾èµ–æ—¶éœ€è¦ï¼‰
4. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼Œæ ¹æ®æç¤ºè§£å†³

**å¸¸è§é”™è¯¯**ï¼š

```bash
# é”™è¯¯ï¼šconda: command not found
# è§£å†³ï¼šå®‰è£… Miniconda æˆ– Anaconda

# é”™è¯¯ï¼šPython version too low
# è§£å†³ï¼šä½¿ç”¨ Conda åˆ›å»ºæŒ‡å®šç‰ˆæœ¬çš„ç¯å¢ƒ

# é”™è¯¯ï¼šPermission denied
# è§£å†³ï¼šæ£€æŸ¥ç›®å½•æƒé™ï¼Œæˆ–ä½¿ç”¨ sudoï¼ˆä¸æ¨èï¼‰
```

## æœ€ä½³å®è·µ

### 1. ç¯å¢ƒå‘½åè§„èŒƒ

```bash
# æ¨èï¼šä½¿ç”¨é¡¹ç›®åç§°
mai_notebook

# é¿å…ï¼šä½¿ç”¨é€šç”¨åç§°
venv, env, python
```

### 2. ä¾èµ–ç®¡ç†

```bash
# å¼€å‘ç¯å¢ƒï¼šå®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements-dev.txt

# ç”Ÿäº§ç¯å¢ƒï¼šä»…å®‰è£…è¿è¡Œæ—¶ä¾èµ–
pip install -r requirements.txt

# ä½¿ç”¨ uv åŠ é€Ÿå®‰è£…
uv pip install -r requirements-dev.txt
```

### 3. ç¯å¢ƒéªŒè¯

```bash
# åˆ›å»ºç¯å¢ƒåï¼ŒéªŒè¯é…ç½®
./manage.sh test-env

# è¿è¡Œæµ‹è¯•ç¡®ä¿ç¯å¢ƒæ­£å¸¸
./manage.sh test
```

### 4. ç¯å¢ƒéš”ç¦»

```bash
# æ¯ä¸ªé¡¹ç›®ä½¿ç”¨ç‹¬ç«‹çš„ç¯å¢ƒ
# é¿å…åœ¨ç³»ç»Ÿ Python ä¸­å®‰è£…é¡¹ç›®ä¾èµ–
# ä½¿ç”¨ .gitignore å¿½ç•¥ç¯å¢ƒç›®å½•
```

### 5. å›¢é˜Ÿåä½œ

```bash
# 1. åœ¨æ–‡æ¡£ä¸­è¯´æ˜æ¨èçš„ç¯å¢ƒé…ç½®
# 2. ä½¿ç”¨ tests/.test_env é…ç½®æ¨èç¯å¢ƒåç§°
# 3. åœ¨ CI/CD ä¸­ä½¿ç”¨ç›¸åŒçš„ Python ç‰ˆæœ¬
# 4. å®šæœŸåŒæ­¥ä¾èµ–æ–‡ä»¶
```

## ç¯å¢ƒé…ç½®æ–‡ä»¶

### tests/.test_env

æµ‹è¯•é…ç½®æ–‡ä»¶ä¸­åŒ…å«æ¨èçš„ç¯å¢ƒåç§°ï¼š

```bash
# æ¨èçš„ Conda ç¯å¢ƒåç§°
RECOMMENDED_CONDA_ENV=mai_notebook
```

è¿è¡Œæµ‹è¯•æ—¶ï¼Œå·¥å…·ä¼šæ£€æŸ¥å½“å‰ç¯å¢ƒæ˜¯å¦åŒ¹é…æ¨èç¯å¢ƒã€‚

### .gitignore

ç¡®ä¿è™šæ‹Ÿç¯å¢ƒç›®å½•ä¸è¢«æäº¤ï¼š

```gitignore
# è™šæ‹Ÿç¯å¢ƒ
venv/
.venv/
env/
ENV/
```

## ç›¸å…³å‘½ä»¤

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
./manage.sh create-env

# æ£€æŸ¥æµ‹è¯•ç¯å¢ƒ
./manage.sh test-env

# è¿è¡Œæµ‹è¯•
./manage.sh test

# æŸ¥çœ‹å¸®åŠ©
./manage.sh help
```

## ç›¸å…³æ–‡æ¡£

- [æµ‹è¯•ç¯å¢ƒè®¾ç½®](./æµ‹è¯•ç¯å¢ƒè®¾ç½®.md)
- [æµ‹è¯•é…ç½®æŒ‡å—](./æµ‹è¯•é…ç½®æŒ‡å—.md)
- [ä¾èµ–ç®¡ç†è¯´æ˜](../guides/ä¾èµ–ç®¡ç†è¯´æ˜.md)
- [README](../../README.md)

---

**æ–‡æ¡£ä¿¡æ¯**

| é¡¹ç›® | å†…å®¹ |
|------|------|
| åˆ›å»ºæ—¥æœŸ | 2026-02-22 |
| æœ€åæ›´æ–° | 2026-02-22 |
| ç»´æŠ¤è€… | CorrectPath, A-Dawn, cuckoo711 |
| çŠ¶æ€ | ğŸ“ å‚è€ƒæ–‡æ¡£ |
