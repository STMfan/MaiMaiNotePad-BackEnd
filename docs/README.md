# 📚 MaiMaiNotePad 后端项目文档

欢迎查阅 MaiMaiNotePad 后端项目文档。本文档索引帮助您快速找到所需的文档。

## 📂 文档结构

```
docs/
├── README.md                           # 本文档（文档索引）
├── .template.md                        # 文档模板
├── 文档格式规范.md                     # 文档格式规范
├── 更新日志.md                         # 版本更新历史
├── api/                                # API 相关文档
│   ├── API文档.md                      # REST API 接口文档
│   └── MaiMNP_API.postman_collection.json  # Postman 测试集合
├── architecture/                       # 架构相关文档
│   ├── 架构文档.md                     # 系统架构设计
│   └── 项目优化建议.md                 # 性能和架构优化建议
├── cache/                              # 缓存相关文档
│   ├── 缓存配置指南.md                 # Redis 缓存配置指南
│   ├── 缓存系统配置指南.md             # 缓存系统配置方法
│   ├── 缓存中间件使用指南.md           # FastAPI 缓存中间件集成
│   ├── 缓存集成示例.md                 # 缓存集成步骤和示例
│   ├── 缓存统计API文档.md              # 缓存统计 API 端点说明
│   └── 缓存日志记录指南.md             # 缓存日志记录功能
├── configuration/                      # 配置相关文档
│   └── 配置管理文档.md                 # 配置系统说明
├── database/                           # 数据库相关文档
│   ├── 数据模型.md                     # 数据库表结构
│   └── 数据库迁移指南.md               # Alembic 迁移指南
├── deployment/                         # 部署相关文档
│   └── Docker部署指南.md               # Docker Compose 部署指南
├── development/                        # 开发相关文档
│   ├── 版本管理.md                     # 版本号管理规范
│   ├── 错误码文档.md                   # 错误码列表（自动生成）
│   ├── 代码质量工具.md                 # 代码质量工具配置和使用
│   ├── 虚拟环境创建指南.md             # 虚拟环境创建和管理
│   └── 依赖管理说明.md                 # 依赖管理和安装指南
├── testing/                            # 测试相关文档
│   ├── 测试配置指南.md                 # 测试配置说明
│   └── 测试环境设置.md                 # 测试环境检查和故障排查
└── archive/                            # 归档文档
    ├── README.md                       # 归档说明
    ├── 代码质量修复计划.md             # 代码质量问题修复记录 ✅
    ├── 类型检查修复计划.md             # 类型检查问题分析 ✅
    ├── 类型检查修复总结.md             # 类型检查修复记录 ✅
    ├── 虚拟环境功能实现总结.md         # 虚拟环境功能实现记录 ✅
    ├── 项目整理总结.md                 # 项目整理记录 ✅
    ├── 密码库迁移说明.md               # 密码库迁移指南 ✅
    ├── 测试覆盖率分析.md               # 测试覆盖率报告 ✅
    ├── Redis缓存机制最终验证报告.md    # Redis 缓存验证报告 ✅
    ├── 人设卡文件大小限制优化_2026-02-22.md  # 人设卡优化记录 ✅
    ├── 文档结构整理记录_2026-02-22.md        # 文档整理记录 ✅
    ├── 元测试套件重构_2026-02-22.md          # 测试套件重构记录 ✅
    ├── Docker文件结构整理_2026-02-23.md      # Docker 文件整理记录 ✅
    ├── manage脚本错误处理改进_2026-02-23.md  # manage 脚本错误处理改进 ✅
    ├── manage脚本功能扩展_2026-02-23.md      # manage 脚本功能扩展 ✅
    ├── AI内容审核模块实施总结_2026-02-24.md  # AI 内容审核模块实施 ✅
    └── 通用缓存失效机制实现_2026-02-24.md    # 通用缓存失效机制 ✅
```

---

## 📖 核心文档

### 🚀 快速开始

#### [项目主文档](../README.md)
- 项目简介和功能概述
- 快速开始指南
- 安装和配置说明
- 基本使用方法

**适用于**: 所有用户

---

### 🌐 API 文档

#### [API文档](./api/API文档.md)
- 所有 REST API 端点说明
- 请求/响应格式
- 认证和授权
- 错误处理

**适用于**: 前端开发者、API 集成开发者

#### [Postman 测试集合](./api/MaiMNP_API.postman_collection.json)
- 可导入 Postman 的 API 测试集合
- 包含所有 API 端点的示例请求

**适用于**: 前端开发者、测试工程师

---

### 🏗️ 架构文档

#### [架构文档](./architecture/架构文档.md)
- 项目架构设计
- 技术栈说明
- 模块划分
- 设计模式和最佳实践

**适用于**: 后端开发者、架构师

#### [项目优化建议](./architecture/项目优化建议.md)
- 项目现状评估
- 性能优化方案
- 架构升级建议
- 可观测性增强
- 实施路线图

**适用于**: 后端开发者、架构师、技术负责人

---

### ⚙️ 配置文档

#### [配置管理文档](./configuration/配置管理文档.md)
- 配置系统概述
- 配置文件说明（.env 和多环境配置）
- 配置优先级
- 多环境切换（dev/prod/degraded）
- 部署指南

**相关文件**:
- 配置文件目录：`configs/`
- 开发环境配置：`configs/config.dev.toml`
- 生产环境配置：`configs/config.prod.toml`
- 降级模式配置：`configs/config.degraded.toml`
- 配置说明文档：`configs/README.md`

**适用于**: 后端开发者、运维人员

---

### 🗄️ 缓存文档

#### [缓存配置指南](./cache/缓存配置指南.md)
- Redis 缓存配置详解
- 开发/生产/降级模式配置
- 配置参数说明和最佳实践
- 配置验证工具使用
- 故障排查指南

**适用于**: 后端开发者、运维人员

#### [缓存系统配置指南](./cache/缓存系统配置指南.md)
- Redis 缓存系统配置方法
- 配置参数说明和验证
- 自动降级机制配置
- 使用场景和故障排查

**适用于**: 后端开发者、运维人员

#### [缓存中间件使用指南](./cache/缓存中间件使用指南.md)
- FastAPI 缓存中间件集成
- 自动缓存 GET 请求响应
- 缓存头处理（Cache-Control、ETag）
- 缓存降级机制
- 缓存统计和监控
- 最佳实践和故障排查

**适用于**: 后端开发者

#### [缓存集成示例](./cache/缓存集成示例.md)
- 缓存中间件集成步骤
- 配置示例和使用场景
- 性能对比和测试验证
- 监控告警配置

**适用于**: 后端开发者

#### [缓存统计API文档](./cache/缓存统计API文档.md)
- 缓存统计 API 端点说明
- 统计信息字段说明
- 使用场景和集成示例
- 降级原因说明

**适用于**: 后端开发者、运维人员

#### [缓存日志记录指南](./cache/缓存日志记录指南.md)
- 结构化日志格式说明
- 日志类型和字段说明
- 日志分析方法
- 监控告警配置

**适用于**: 后端开发者、运维人员

---

### ️ 数据库文档

#### [数据模型](./database/数据模型.md)
- 数据库表结构
- 字段说明
- 关系图
- 索引设计

**适用于**: 后端开发者、数据库管理员

#### [数据库迁移指南](./database/数据库迁移指南.md)
- Alembic 迁移工具使用
- 迁移文件管理
- 常见问题和解决方案

**适用于**: 后端开发者

---

### 💻 开发文档

#### [版本管理](./development/版本管理.md)
- 版本号规则和格式（语义化版本）
- 如何更新版本号
- 版本发布流程
- Git 标签管理

**适用于**: 开发者、项目维护者

#### [错误码文档](./development/错误码文档.md)
- 所有错误码列表
- 错误消息说明（中英文）
- HTTP 状态码映射
- 错误处理最佳实践

**适用于**: 所有开发者

**注意**: 此文档由 `scripts/python/generate_error_codes_doc.py` 自动生成

#### [代码质量工具](./development/代码质量工具.md)
- 代码格式化工具（Black）
- 代码风格检查（Flake8）
- 类型检查（Mypy）
- 工具配置和使用方法

**适用于**: 所有开发者

#### [虚拟环境创建指南](./development/虚拟环境创建指南.md)
- 使用 manage.sh 创建虚拟环境
- 三种环境类型详解（Conda/venv/uv）
- 环境选择建议和最佳实践
- 常见问题和故障排查

**适用于**: 所有开发者

#### [依赖管理说明](./development/依赖管理说明.md)
- 生产环境和开发环境依赖分离
- 依赖安装和更新指南
- Docker 部署最佳实践
- 安全建议和最佳实践

**适用于**: 后端开发者、运维人员

---

### 🛠️ 管理工具文档

#### [管理工具使用指南](./guides/管理工具使用指南.md)
- manage.sh 管理工具完整使用指南
- TUI 和 CLI 两种交互模式
- 直接命令执行方式
- 环境管理、服务管理、测试相关、项目维护等功能
- 智能环境检测和 Conda 环境切换
- 配置环境切换（dev/prod/degraded）
- 常见问题和故障排查

**适用于**: 所有开发者、运维人员

#### [TUI 模式说明](./guides/TUI模式说明.md)
- TUI（Terminal User Interface）功能详解
- TUI vs CLI 模式对比
- 自动模式检测和强制 CLI 模式
- dialog 工具安装指南
- TUI 操作指南和快捷键
- 常见问题和技术实现

**适用于**: 所有开发者

#### [管理工具快速参考](./guides/管理工具快速参考.md)
- 常用命令快速参考
- 按功能分类的命令列表
- 快速查找所需命令

**适用于**: 所有开发者

#### [环境检测功能说明](./guides/环境检测功能说明.md)
- 智能 Conda 环境检测功能详解
- 环境切换和激活流程
- 使用场景和注意事项
- 故障排查指南

**适用于**: 所有开发者

#### [AI内容审核使用指南](./guides/AI内容审核使用指南.md)
- AI 内容审核功能概述
- 硅基流动 API 配置
- 审核 API 使用方法
- 代码集成示例
- 最佳实践和故障排查

**适用于**: 后端开发者、前端开发者

#### [AI内容审核快速开始](./guides/AI内容审核快速开始.md)
- 5 分钟快速集成指南
- API Key 获取和配置
- 快速测试和验证
- 常见问题解答

**适用于**: 所有开发者

---

### 🚀 部署文档

#### [Docker部署指南](./deployment/Docker部署指南.md)
- Docker Compose 快速开始
- Redis 服务配置和管理
- 数据持久化和备份
- 监控和调试
- 生产环境部署
- 故障排查和降级模式

**相关文件**:
- Docker 配置目录：`docker/`
- Docker Compose 配置：`docker/docker-compose.yml`
- Docker 环境变量模板：`docker/.env.docker`
- Docker 快速开始：`docker/README.md`

**适用于**: 后端开发者、运维人员

---

### 🗄️ 缓存文档

#### [缓存系统配置指南](./cache/缓存系统配置指南.md)
- Redis 缓存系统配置方法
- 配置参数说明和验证
- 自动降级机制配置
- 使用场景和故障排查

**适用于**: 后端开发者、运维人员

#### [缓存中间件使用指南](./cache/缓存中间件使用指南.md)
- FastAPI 缓存中间件集成
- 自动缓存 GET 请求响应
- 缓存头处理（Cache-Control、ETag）
- 缓存降级机制
- 缓存统计和监控
- 最佳实践和故障排查

**适用于**: 后端开发者

#### [缓存集成示例](./cache/缓存集成示例.md)
- 缓存中间件集成步骤
- 配置示例和使用场景
- 性能对比和测试验证
- 监控告警配置

**适用于**: 后端开发者

#### [缓存统计API文档](./cache/缓存统计API文档.md)
- 缓存统计 API 端点说明
- 统计信息字段说明
- 使用场景和集成示例
- 降级原因说明

**适用于**: 后端开发者、运维人员

#### [缓存日志记录指南](./cache/缓存日志记录指南.md)
- 结构化日志格式说明
- 日志类型和字段说明
- 日志分析方法
- 监控告警配置

**适用于**: 后端开发者、运维人员

---

### 🧪 测试文档

#### [测试配置指南](./testing/测试配置指南.md)
- 测试配置文件说明（tests/.test_env）
- 并行测试参数配置
- 测试环境管理
- 性能优化建议

**适用于**: 所有开发者、测试工程师

#### [测试环境设置](./testing/测试环境设置.md)
- Python 环境要求和检查
- Conda 环境管理
- 依赖安装和验证
- 常见问题和故障排查

**适用于**: 所有开发者、测试工程师

---

### 💡 示例代码

#### [示例代码目录](../examples/README.md)
- 缓存日志记录演示（cache_logging_demo.py）
- 可执行的功能演示示例
- 快速学习和理解项目功能

**适用于**: 所有开发者

**可用示例**:
- **缓存日志记录演示**: 演示 Redis 缓存机制的日志记录功能，包括缓存操作、降级场景和日志分析方法

---

### 📚 更新日志

#### [更新日志](./更新日志.md)
- 版本更新历史
- 新增功能
- 问题修复
- 破坏性变更

**适用于**: 所有用户

---

### 📦 归档文档

#### [归档文档目录](./archive/README.md)
- 已完成的任务型文档
- 历史记录和参考资料
- 项目改进记录

**适用于**: 需要了解项目历史的开发者

归档文档包括：
- 代码质量修复计划和总结
- 类型检查修复计划和总结
- 虚拟环境功能实现总结
- 项目整理总结
- 密码库迁移说明
- 测试覆盖率分析
- Redis 缓存机制最终验证报告
- 人设卡文件大小限制优化（2026-02-22）
- 文档结构整理记录（2026-02-22）
- 元测试套件重构（2026-02-22）
- Docker 文件结构整理（2026-02-23）
- manage 脚本错误处理改进（2026-02-23）
- manage 脚本功能扩展（2026-02-23）
- 配置文件管理优化（2026-02-23）
- AI 内容审核模块实施（2026-02-24）
- 通用缓存失效机制实现（2026-02-24）

---

## 🔍 快速查找

### 按角色查找

#### 👨‍💻 前端开发者
1. [API文档](./api/API文档.md) - API 接口文档
2. [错误码文档](./development/错误码文档.md) - 错误码文档
3. [AI内容审核使用指南](./guides/AI内容审核使用指南.md) - 内容审核集成
4. [更新日志](./guides/更新日志.md) - 版本更新

#### 🔧 后端开发者
1. [架构文档](./architecture/架构文档.md) - 系统架构
2. [数据模型](./database/数据模型.md) - 数据库设计
3. [数据库迁移指南](./database/数据库迁移指南.md) - 数据库迁移
4. [配置管理文档](./configuration/配置管理文档.md) - 配置系统
5. [缓存配置指南](./cache/缓存配置指南.md) - 缓存配置
6. [缓存系统配置指南](./cache/缓存系统配置指南.md) - 缓存配置方法
7. [缓存中间件使用指南](./cache/缓存中间件使用指南.md) - 缓存机制
8. [缓存集成示例](./cache/缓存集成示例.md) - 缓存集成
9. [缓存统计API文档](./cache/缓存统计API文档.md) - 缓存监控
10. [缓存日志记录指南](./cache/缓存日志记录指南.md) - 缓存日志
11. [版本管理](./development/版本管理.md) - 版本规范
12. [代码质量工具](./development/代码质量工具.md) - 代码规范和工具
13. [依赖管理说明](./development/依赖管理说明.md) - 依赖安装和管理
14. [AI内容审核使用指南](./guides/AI内容审核使用指南.md) - AI 审核集成
15. [项目优化建议](./architecture/项目优化建议.md) - 优化方案

#### 🧪 测试工程师
1. [测试配置指南](./testing/测试配置指南.md) - 测试配置
2. [测试环境设置](./testing/测试环境设置.md) - 环境检查
3. [测试说明](../tests/docs/测试说明.md) - 测试概览
4. [示例代码目录](../examples/README.md) - 功能演示示例

#### 🚀 运维人员
1. [配置管理文档](./configuration/配置管理文档.md) - 配置管理
2. [缓存配置指南](./cache/缓存配置指南.md) - 缓存配置和故障排查
3. [Docker部署指南](./deployment/Docker部署指南.md) - Docker 部署
4. [脚本说明](../scripts/脚本说明.md) - 运维脚本
5. [错误码文档](./development/错误码文档.md) - 错误处理

#### 📈 项目管理者
1. [架构文档](./architecture/架构文档.md) - 技术架构
2. [项目优化建议](./architecture/项目优化建议.md) - 优化路线图
3. [更新日志](./更新日志.md) - 版本历史

### 按任务查找

#### 🆕 新手入门
1. [项目主文档](../README.md) - 快速开始
2. [虚拟环境创建指南](./development/虚拟环境创建指南.md) - 环境搭建
3. [示例代码目录](../examples/README.md) - 功能演示
4. [API文档](./api/API文档.md) - API 参考
5. [数据模型](./database/数据模型.md) - 数据库查询
6. [错误码文档](./development/错误码文档.md) - 错误处理
7. [测试配置指南](./testing/测试配置指南.md) - 运行测试
8. [脚本说明](../scripts/脚本说明.md) - 开发工具

#### 🐛 问题排查
1. [管理工具使用指南](./guides/管理工具使用指南.md) - 管理工具故障排查
2. [错误码文档](./development/错误码文档.md) - 错误码含义
3. [测试环境设置](./testing/测试环境设置.md) - 测试问题排查
4. [环境检测功能说明](./guides/环境检测功能说明.md) - 环境问题排查
5. [脚本说明](../scripts/脚本说明.md) - 诊断工具
6. [配置管理文档](./configuration/配置管理文档.md) - 配置问题

#### 🔧 开发配置
1. [管理工具使用指南](./guides/管理工具使用指南.md) - 管理工具完整指南
2. [虚拟环境创建指南](./development/虚拟环境创建指南.md) - 环境创建
3. [依赖管理说明](./development/依赖管理说明.md) - 依赖安装
4. [配置管理文档](./configuration/配置管理文档.md) - 配置文件
5. [代码质量工具](./development/代码质量工具.md) - 开发工具
6. [环境检测功能说明](./guides/环境检测功能说明.md) - 环境检测和切换

#### 🚀 部署上线
1. [配置管理文档](./configuration/配置管理文档.md) - 生产配置
2. [缓存配置指南](./cache/缓存配置指南.md) - 缓存部署配置
3. [Docker部署指南](./deployment/Docker部署指南.md) - Docker 部署
4. [数据库迁移指南](./database/数据库迁移指南.md) - 数据库升级
5. [依赖管理说明](./development/依赖管理说明.md) - 依赖部署

---

## 📝 文档维护

### 文档分类

#### 自动生成的文档
以下文档由脚本自动生成，请勿手动编辑：
- [错误码文档](./development/错误码文档.md) - 由 `scripts/python/generate_error_codes_doc.py` 生成

#### 手动维护的文档
其他所有文档均需手动维护，请遵循[文档格式规范](./文档格式规范.md)

### 文档更新流程

1. 使用 [.template.md](./.template.md) 模板创建新文档
2. 遵循[文档格式规范](./文档格式规范.md)
3. 更新本文档索引
4. 提交变更并说明更新内容

### 归档流程

当文档完成其使命后（如任务完成、功能实现完毕），应将其移至 `archive/` 目录：

1. 将文档移至 `docs/archive/`
2. 更新 `docs/archive/README.md`
3. 从本文档索引中移除
4. 提交变更并说明归档原因

---

## 🔗 相关资源

### 项目资源
- [项目主页](https://github.com/STMfan/MaiMaiNotePad-BackEnd)
- [问题追踪](https://github.com/STMfan/MaiMaiNotePad-BackEnd/issues)
- [贡献指南](../CONTRIBUTING.md)（如果有）

### 外部文档
- [FastAPI 官方文档](https://fastapi.tiangolo.com/)
- [SQLAlchemy 官方文档](https://docs.sqlalchemy.org/)
- [Alembic 官方文档](https://alembic.sqlalchemy.org/)
- [Pytest 官方文档](https://docs.pytest.org/)

---

**文档信息**

| 项目 | 内容 |
|------|------|
| 创建日期 | 2025-01-15 |
| 最后更新 | 2026-02-24 |
| 维护者 | CorrectPath, A-Dawn, cuckoo711 |
| 状态 | 📝 文档索引 |
| 文档数量 | 35 个活跃文档 + 17 个归档文档 |
